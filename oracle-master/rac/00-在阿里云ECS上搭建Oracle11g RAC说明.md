# 在阿里云ECS上搭建Oracle11g RAC说明

<!-- MDTOC maxdepth:6 firsth1:1 numbering:0 flatten:0 bullets:1 updateOnSave:1 -->

- [在阿里云ECS上搭建Oracle11g RAC说明](#在阿里云ecs上搭建oracle11g-rac说明)   
   - [环境需求](#环境需求)   
   - [需要提供的信息](#需要提供的信息)   
   - [安装实施周期](#安装实施周期)   

<!-- /MDTOC -->

> 2020.01.04

## 环境需求

| 环境需求                                                     | 限制                                                         | 备注                                                         |
| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| [ECS](https://www.aliyun.com/product/ecs?spm=5176.54360.h2v3icoap.13.eb406a81SuWmQw&aly_as=D0bby8Qs) | 最少2台，同地域同可用区                                      |                                                              |
| 系统配置                                                     | 最低4C8G                                                     | 根据实际业务量规划                                           |
| 操作系统                                                     | CentOS6.8 或以下版本                                         |                                                              |
| 系统盘                                                       | 最低 SSD 80G                                                 |                                                              |
| 交换机                                                       | 与ECS相同可用区                                              |                                                              |
| 备份数据盘                                                   | 一块，最低 SSD 100G                                          | 根据实际备份需求规划，例如保留1周，则数据量的两倍<br>挂载在第一个节点上 |
| [共享块存储](https://promotion.aliyun.com/ntms/act/vsan.html?spm=5176.54360.1194325.6.416e6a81zMSksr&open_id=undefined&aly_as=scOFWE5E) | 三块<br>第一块：SSD 20G<br>第二块：SSD 待规划<br>第三块：SSD 待规划 | 根据实际规划，且必须与ECS相同地域可用区域<br>* 2019年8月 阿里云的共享存储块比较难申请。<br>* 替代方案：高速千兆以太网+iSCSI（openfiler） |

* 可用区：因共享块存储目前不支持跨可用区使用，故RAC的所有节点必须放置在同一可用区（比如都位于华东2可用区E）。

* 安全加固：在安装数据库之前，不要运行我们公司的安全加固脚本。安装完毕后再运行。

* 共享块存储：

  | No.    | 用途              | 大小                                                         |
  | ------ | ----------------- | ------------------------------------------------------------ |
  | 第一块 | OCR集群资源管理盘 | 20G SSD                                                      |
  | 第二块 | Data数据盘        | 根据数据量决定，不小于数据量的1.5倍（例如数据量为100G，则需要150G SSD） |
  | 第三块 | ARCH归档盘        | 根据系统繁忙程度，以及数据库恢复时的数据一致性要求，默认数据的0.5倍（例如数据量为100G，则需要50G SSD） |



## 需要提供的信息

| 需客户提供的信息 | 待填写 | 举例                               |
| ---------------- | ------ | ---------------------------------- |
| 数据库版本       |        | Oracle 11.2.0.1                    |
| 数据量           |        | 100GB                              |
| SID              |        | `orac`                             |
| 端口号           |        | 1521                               |
| 字符集           |        | ZHS16GBK                           |
| 备份恢复         |        | RMAN一周一全备每天一增备，保留14天 |
| 其他需求         |        |                                    |



## 安装实施周期

Oracle 11g RAC安装，需要在所有环境准备完毕后，一般需要1.5～3个工作日完成RAC环境安装配置。
